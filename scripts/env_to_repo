#!/usr/bin/env ruby
# encoding: utf-8

SCRIPTS = %w{backlight clean_disk env_to_repo env_to_server fix_scroll
             img_to_mail private repair_mongodb}
DOTS = %w{bashrc gemrc irbrc XCompose gitconfig ackrc vimrc vim}

HOME = File.expand_path '~'
SCRIPT_DIR = 'Скрипты'
REPO = '.my_environment'

require 'fileutils'
class String
  def /(path); File.join(self, path); end
end

Dir.glob(HOME / REPO / '*') { |i| FileUtils.rm_r(i) }

DOTS.each do |i|
  from = HOME / ".#{i}"
  if File.directory? from
    FileUtils.cp_r(from, HOME / REPO / i)
  else
    FileUtils.link(from, HOME / REPO / i)
  end
end

Dir.mkdir HOME / REPO / 'scripts'
SCRIPTS.each do |i|
  FileUtils.link(HOME / SCRIPT_DIR / i, HOME / REPO / 'scripts' / i)
end
