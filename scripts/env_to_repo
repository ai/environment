#!/usr/bin/env ruby

SCRIPTS = %w{gmail private env_to_repo img_to_mail clean_disk port
             powermode background_to_login repair_mongodb imgur}
DOTS = %w{bashrc gemrc irbrc XCompose gitconfig ackrc vimrc vim}

HOME = File.expand_path '~'
SCRIPT_DIR = 'Скрипты'
REPO = '.my_environment'

require 'fileutils'
class String
  def /(path); File.join(self, path); end
end

Dir.glob(HOME / REPO / '*') { |i| FileUtils.rm_r(i) }

DOTS.each do |i|
  from = HOME / ".#{i}"
  if File.directory? from
    FileUtils.cp_r(from, HOME / REPO / i)
  else
    FileUtils.link(from, HOME / REPO / i)
  end
end

Dir.mkdir HOME / REPO / 'scripts'
SCRIPTS.each do |i|
  FileUtils.link(HOME / SCRIPT_DIR / i, HOME / REPO / 'scripts' / i)
end
